= Создать карточку "Задание"

Карточка _Задание_ может быть создана различными способами. Однако, все способы создания предполагают выбор вида создаваемого объекта.

.Вкладка "Создание задания" для Автора задания
image::task-create-tab.png[Вкладка "Создание задания" для Автора задания]

В базовый комплект поставки системы {dv} (при отсутствии модуля _{dm}_) входит базовый тип карточки _Задание_. Данный тип может использоваться для создания карточек, однако его настройки не подлежат изменению.

include::partial$excerpts.adoc[tags=user-kinds]

.Создание карточки _Задание_ может быть выполнено следующими способами:
include::partial$excerpts.adoc[tags=create]

.Также для карточек Задание существуют дополнительные способы создания:
* xref:additional/additional-links.adoc[По ссылке из другой карточки].
* xref:additional/additional-performance-tree.adoc[Из дерева исполнения связанной карточки].

Созданная карточка задания изначально находится в состоянии `Инициализация` (в соответствии с "автоматом состояний"). При этом часть полей карточки будет автоматически заполнена на основе следующих сведений:

* В качестве _Автора_ задания указывается текущий сотрудник.
* Настройки карточки наследуются из вида или шаблона (если карточка создаётся по шаблону).

.Созданную карточку необходимо настроить:
* <<author,Выбрать>> автора задания.
* <<name,Ввести>> название и содержание задания.
* <<performer,Выбрать>> исполнителя задания.
* <<deadlines,Указать>> сроки исполнения задания.
* <<control,Настроить>> контроль исполнения задания.

[#author]
== Выбор автора задания

В поле _Автор_ автоматически появляется имя сотрудника, создавшего данную карточку.

_Автором_ может быть только пользователь, зарегистрированный в _Справочнике сотрудников_.

include::partial$excerpts.adoc[tags=lync]

[NOTE]
====
Чтобы можно было выбрать значение в поле из _Справочника сотрудников_ в _Справочнике видов карточек_ для вида карточки задания должна быть включена настройка `*Разрешить выбор автора из Справочника сотрудников*`.
====

.Чтобы выбрать автора задания из Справочника сотрудников:
. Нажмите на кнопку image:buttons/three-dots.png[Три точки] в правой части строки.
. В окне _Выбор сотрудника_ выберите нужную запись, затем нажмите на кнопку image:buttons/check.png[Зелёная галочка].
. Если имя сотрудника заранее известно, можно воспользоваться функцией автоматической подстановки имени.
+
Для этого введите в поле _Автор_ первые буквы имени сотрудника и выберите нужный вариант из выпадающего списка.
+
. В данном поле можно также выбрать сотрудников, для которых текущий автор является заместителем. Нажмите на кнопку image:buttons/triangle-down.png[Треугольник вниз], чтобы выбрать замещаемого сотрудника.
+
В появившемся списке замещаемых сотрудников, выберите нужного сотрудника.
+
.Выбор сотрудника-заместителя автора
image::task-select-author-deputy.png[Выбор сотрудника-заместителя автора]

[#name]
== Ввод названия и содержания задания

.Чтобы определить название и содержание задания:
. Создайте карточку _Задание_.
. В поле _Название_ укажите название задания, которое будет отображаться в заголовке окна задания и _Области представления_ {wincl}а.
. В поле _Содержание_ укажите суть задания в виде короткого текстового резюме.

[#performer]
== Выбор исполнителя задания

В число исполнителей могут входить _Сотрудники_, _Подразделения_, _Группы_, _Роли_ из _Справочника сотрудников_.

.Данные категории будут доступны для выбора в карточке задания, если соблюдены следующие условия:
* В _Справочнике сотрудников_ должны быть настроены указанные категории: созданы записи сотрудников, имеются наполненные группы, подразделения, роли.
* В _Справочнике видов карточек_ должен быть определён список доступных исполнителей.

Поле _Выбор исполнителя_ позволяет составить список, из которого можно будет выбирать _назначенного исполнителя_, когда задание будет запущено. Назначенный исполнитель -- это сотрудник, непосредственно взявший запущенное задание в работу. Чтобы сотрудник смог это сделать, он должен быть в списке выбранных исполнителей до запуска задания.

.Поле "Выбор исполнителя"
image::task-select-performer.png[Поле "Выбор исполнителя"]

.Чтобы выбрать исполнителя:
. Введите в строку первые буквы имени, чтобы активировать быстрый поиск сотрудников, групп, подразделений, ролей и поисковых слов в основной строке поля.
. Чтобы открыть окно редактирования списка сотрудников:
+
[lowerroman]
.. Нажмите на кнопку image:buttons/triangle-down.png[Треугольник вниз].
+
.Окно редактирования списка возможных исполнителей
image::tsak-select-performer.png[Окно редактирования списка возможных исполнителей]
+
.. Добавьте запись нажатием на кнопку image:desdirs:buttons/plus-green.png[Зелёный плюс], затем выберите добавленную строку.
.. Поле _Быстрый поиск_ позволяет добавить исполнителя без использования классического диалога выбора из _Справочника сотрудников_. Если имя исполнителя известно, введите или первые буквы его имени в поле быстрого поиска.
+
В поле появится список всех подходящих вариантов.
+
.. Добавьте результат в список выбранных исполнителей нажатием кнопки image:buttons/frame-plus.png[Рамка с плюсом].
.. Чтобы удалить запись, нажмите на кнопку image:buttons/x-red.png[Красный керестик].
+
. Чтобы выбрать исполнителя из заранее сформированного списка исполнителей:
+
[lowerroman]
.. Нажмите на кнопку image:buttons/star.png[Звезда].
+
Использование данного способа и отображение кнопки определяется настройками, произведенными для карточки Задания в _Справочнике видов карточек_.
+
.Окно "Выбор исполнителя"
image::task-select-performers.png[Окно "Выбор исполнителя"]
+
.. Выберите исполнителя двойным щелчком мыши на записи.
+
Можно выбрать нескольких исполнителей, а также использовать предопределённые поисковые слова и последних исполнителей.

[#deadlines]
== Указание сроков исполнения задания

При создании задания необходимо указать сроки его выполнения.

.Чтобы настроить сроки исполнения, заполните следующие поля:
* _Дата начала_ -- предполагаемая дата начала выполнения задания исполнителем.
* _Срок исполнения_ -- планируемая дата завершения выполнения задания исполнителем.
* _Длительность (ч.)_ -- в поле будет автоматически рассчитана длительность выполнения задания (в часах), на основании указанных дат начала и завершения задания.
* _Трудоемкость (ч.)_ -- в поле можно указать время, которое было реально затрачено исполнителем на выполнение задания.

.Настройка сроков исполнения задания
image::task-set-deadline.png[Настройка сроков исполнения задания]

[#automatic-deadlines]
=== Автоматическое вычисление сроков

Сроки могут также заполняться в автоматическом режиме.

.Функция автозаполнения доступна при следующих условиях:
* В карточке задания должен быть указан хотя бы один исполнитель.
+
Если указано несколько _Исполнителей_, относящихся к одному подразделению, в расчетах будут использоваться настройки календаря, заданного для подразделения. Если исполнители относятся к разным подразделениям, будет использоваться календарь, заданный по умолчанию.
+
* Чтобы выбрать исполнителя в _Справочнике сотрудников_, необходимо указать используемый вид бизнес-календаря.
* Для данного вида карточки Задания в _Справочнике видов карточек_ должно быть разрешено использование бизнес-календаря.
+
Аналогичная настройка должна отображаться в создаваемой или редактируемой карточке _Задание_. При необходимости автозаполнение может быть вручную отменено для конкретного экземпляра карточки.

Если в _Справочнике видов карточек_ для данного вида разрешено использование бизнес-календаря, и в _Справочнике сотрудников_ для исполнителя задания (или его организации, или подразделения) определён бизнес-календарь, заполнение данных полей будет производиться по следующим правилам:

* При заполнении полей _Дата начала_ + _Длительность_ автоматически вычисляется дата завершения.
* При заполнении полей _Дата начала_ + _Срок исполнения_ автоматически вычисляется длительность.
* При заполнении полей _Срок исполнения_ + _Длительность_ автоматически вычисляется дата начала.

Автоматический расчет будет производиться, только если одновременно задано два параметра. При необходимости пользователь может указать только один из параметров, или оставить поля пустыми.

Значение поля _Длительность_ отображается либо в днях, либо часах в зависимости от настройки элемента управления в _Конструкторе разметок_. Формат отображения дат начала и завершения также определяется в настройках элементов разметки.

Если в задании единицы _Длительность_ -- часы, плановые даты вычисляются с учетом текущего времени. Если единицы _Длительности_ -- дни, то `1` день -- это завтрашняя дата до 23:59.

В приложении {dm} можно найти все карточки заданий, которые были просрочены, то есть не были завершены на указанную дачу завершения.

Для поиска используется поле метаданных карточки из группы Задание: _Завершено позже срока_. Данное поле по умолчанию не отображается в карточке, но может быть использовано при построении поисковых запросов. В случае, если задание будет просрочено, поле примет значение `Да`.

[#reminders]
== Настройка напоминаний о выполнении задания

При создании задания можно настроить напоминание о необходимости выполнения задания с использованием задачи Outlook. Напоминание может настроить себе любой пользователь, открывший задание.

Администратор системы может ограничить права пользователей на создание напоминаний в _Конструкторе ролей_.

[WARNING]
====
Формирование напоминаний возможно только при запущенном приложении _Microsoft Outlook_.
====

.Чтобы настроить напоминания:
. Создайте карточку _Задание_, затем перейдите на вкладку "xref:task/card.adoc#create-tab[Создание задания]".
+
.Настройка напоминания о выполнении задания
image::task-set-reminder.png[Настройка напоминания о выполнении задания]
+
. Чтобы определить интервал времени, когда пользователь получит напоминание _Microsoft Outlook_, установите флаг `*Напомнить за N часов до завершения задания*`.
. В поле _Дата напоминания_ укажите дату получения напоминания.
+
Дату можно выбрать при помощи встроенного календаря, который открывается при нажатии на стрелку в правой части поля.

[#control]
== Настройка контроля исполнения задания

При создании задания можно предусмотреть контроль выполнения задания ответственным сотрудником.

.Чтобы настроить контроль исполнения заданий:
. Создайте карточку _Задание_, затем перейдите на вкладку "xref:task/card.adoc#create-tab[Создание задания]" и найдите область _Контроль_.
+
.Настройка контроля исполнения задания
image::task-set-control.png[Настройка контроля исполнения задания]
+
. Установите флаг `*Поставить на контроль*`.
+
Станут активными поля для назначения _Контролёра_ и указания сроков выполнения контроля.
+
. В поле _Контролёр_ укажите фамилию сотрудника, который будет контролировать качество выполнения задания.
+
Выбор производится из _Справочника сотрудников_, который открывается при нажатии на кнопку image:buttons/three-dots.png[Три точки] в правой части поля.
+
. При необходимости укажите дату в поле _Дата контроля_, когда должен быть выполнен контроль выполнения задания.
+
Выбрать дату можно из встроенного календаря, который открывается при нажатии на стрелку в правой части поля.
+
. Чтобы настроить приёмку задания, установите флаг `*Требуется приёмка*`.
+
При установке флага автоматически выставляется флаг `*Поставить на контроль*`.
+
В жизненный цикл карточки задания будет добавлено состояние `На приёмке`. После завершения задание будет переходить не в состояние `Завершено`, а в состояние `На приёмке`.
+
Если происходит возврат с делегирования, флаг не учитывается, на приёмку переходит только окончательно завершаемое задание.
