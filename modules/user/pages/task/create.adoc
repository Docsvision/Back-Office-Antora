= Создание карточки "Задание"

Карточка _Задание_ может быть создана различными способами. Однако, все способы создания предполагают выбор вида создаваемого объекта.

В базовый комплект поставки системы _{dv} 5_ (при отсутствии модуля _{ud}_) входит базовый тип карточки _Задание_. Данный тип может использоваться для создания карточек, однако его настройки не подлежат изменению.

include::partial$excerpts.adoc[tags=user-kinds]

.Создание карточки _Задание_ может быть выполнено следующими способами:
include::partial$excerpts.adoc[tags=create]

.Также для карточек Задание существуют дополнительные способы создания:
* xref:Card_extra_links.adoc[По ссылке из другой карточки].
* xref:Card_extra_perform_tree.adoc[Из дерева исполнения связанной карточки].

Созданная карточка задания изначально находится в состоянии `Инициализация` (в соответствии с "автоматом состояний"). При этом часть полей карточки будет автоматически заполнена на основе следующих сведений:

* В качестве _Автора_ задания указывается текущий сотрудник.
* Настройки карточки наследуются из вида или шаблона (если карточка создается по шаблону).

.Созданную карточку необходимо настроить:
* xref:task/select-author.adoc[Выбрать] автора задания.
* xref:task/Tcard_create_name.adoc[Ввести] название и содержание задания.
* xref:task/Tcard_create_select_performer.adoc[Выбрать] исполнителя задания.
* xref:task/Tcard_create_deadline.adoc[Указать] сроки исполнения задания.
* xref:task/Tcard_create_controll.adoc[Настроить] контроль исполнения задания.

== Выбор автора задания

В поле _Автор_ автоматически появляется имя сотрудника, создавшего данную карточку.

_Автором_ может быть только пользователь, зарегистрированный в _Справочнике сотрудников_.

include::partial$excerpts.adoc[tags=lync]

[NOTE]
====
Чтобы можно было выбрать значение в поле из _Справочника сотрудников_ в _Справочнике видов карточек_ для вида карточки задания должна быть включена настройка `*Разрешить выбор автора из Справочника сотрудников*`.
====

.Чтобы выбрать автора задания из Справочника сотрудников:
. Нажмите на кнопку image:buttons/three-dots.png[Три точки] в правой части строки.
. В окне _Выбор сотрудника_ выберите нужную запись, затем нажмите на кнопку image:buttons/check.png[Зелёная галочка].
. Если имя сотрудника заранее известно, можно воспользоваться функцией автоматической подстановки имени.
+
Для этого введите в поле _Автор_ первые буквы имени сотрудника и выберите нужный вариант из выпадающего списка.
+
. В данном поле можно также выбрать сотрудников, для которых текущий автор является заместителем. Нажмите на кнопку image:buttons/triangle-down.png[Треугольник вниз], чтобы выбрать замещаемого сотрудника.
+
В появившемся списке замещаемых сотрудников, выберите нужного сотрудника.
+
.Выбор сотрудника-заместителя автора
image::task-select-author-deputy.png[Выбор сотрудника-заместителя автора]

== Ввод названия и содержания задания

.Чтобы определить название и содержание задания:
. Создайте карточку _Задание_.
. В поле _Название_ укажите название задания, которое будет отображаться в заголовке окна задания и _Области представления_ {wincl}а.
. В поле _Содержание_ укажите суть задания в виде короткого текстового резюме.

== Выбор исполнителя задания

В число исполнителей могут входить Сотрудники, Подразделения, Группы, Роли _Справочника сотрудников_. Данные категории будут доступны для выбора в карточке задания при соблюдении следующих условий:

* В _Справочнике сотрудников_ должны быть настроены указанные категории (созданы записи на сотрудников, имеются наполненные группы, подразделения, роли);
* В _Справочнике видов карточек_ должен быть определен список доступных исполнителей.

Поле *Выбор исполнителя* позволяет составить список, из которого в дальнейшем, когда задание будет запущено, можно будет выбирать _назначенного исполнителя_. Назначенный исполнитель -- это человек, непосредственно взявший запущенное задание в работу. Для того, чтобы он смог это сделать, он должен быть в списке выбранных исполнителей до запуска задания.

.Поле "Выбор исполнителя"
image::Tcard_select_performer.png[Поле "Выбор исполнителя"]

.Чтобы выбрать исполнителя:
. Для выбора при помощи быстрого поиска сотрудников/групп/подразделений/ролей и поисковых слов в основной строке поля, введите в строку первые буквы имени.
+
В поле появится список всех подходящих вариантов.
. Для выбора из всех доступных исполнителей, выполните:
+
.. Нажмите на кнопку image:buttons/triangle-down.png[Треугольник вниз].
+
Будет открыто окно *Редактирование*.
+
.Окно редактирования списка возможных исполнителей
image::Tcard_select_performer_all.png[Окно редактирования списка возможных исполнителей]
+
.. Чтобы добавить запись, нажмите на кнопку image:buttons/add_green_plus.png[image], затем выберите запись.
.. Поле *Быстрый поиск* позволяет добавить исполнителя без использования классического диалога выбора из _Справочника сотрудников._ Если имя (название) исполнителя известно, следует ввести его (или его первые буквы) в поле быстрого поиска.
+
В поле появится список всех подходящих вариантов.
+
.. Для добавления результата в список выбранных исполнителей, нажмите кнопку image:buttons/frame-plus.png[Рамка с плюсом].
.. Чтобы удалить запись, нажмите на кнопку image:buttons/x-red.png[Красный керестик].
+
. Для выбора из заранее сформированного списка исполнителей:
+
.. Нажмите на кнопку image:buttons/star.png[Звезда].
+
Использование данного способа (включая появление кнопки) определяется настройками, произведенными для карточки Задания в _Справочнике видов карточек_.
+
Будет открыто окно *Выбор исполнителя*.
+
.Окно "Выбор исполнителя"
image::Tcard_select_performer_list.png[Окно "Выбор исполнителя"]
+
.. Выбор производится двойным щелчком мыши на записи.
+
Допускается выбор нескольких исполнителей, а также выбор с использованием предопределенных поисковых слов и последних исполнителей.

== Указание сроков исполнения задания

При создании задания необходимо указать сроки его выполнения. Для настройки сроков необходимо заполнить поля:

* *Дата начала* -- предполагаемая дата начала выполнения задания исполнителем;
* *Дата завершения* -- планируемая дата завершения выполнения задания исполнителем;
* *Длительность (ч.)* -- в поле будет автоматически рассчитана длительность выполнения задания (в часах), на основании указанных дат начала и завершения задания;
* *Трудоемкость (ч.)* -- в поле можно указать время, которое было реально затрачено исполнителем на выполнение задания.

.Настройка сроков исполнения задания
image::Tcard_tab_create_author_deadline.png[Настройка сроков исполнения задания]

Сроки могут также заполняться в автоматическом режиме. Использование функциональности автозаполнения определяется следующими условиями:

* В карточке задания должен быть указан хотя бы один исполнитель. Если указано несколько Исполнителей, и все исполнители относятся к одному подразделению, в расчетах будут использоваться настройки календаря, заданного для подразделения. Если исполнители относятся к разным подразделениям, будет использоваться календарь, заданный по умолчанию.
* Для выбранного исполнителя в _Справочнике сотрудников_ должен быть указан используемый вид бизнес-календаря;
* Для данного вида карточки Задания в _Справочнике видов карточек_ должно быть разрешено использование бизнес-календаря. Аналогичная настройка должна отображаться в создаваемой/редактируемой карточке _Задание_. При необходимости автозаполнение может быть вручную отменено для конкретного экземпляра карточки.

Если в _Справочнике видов карточек_ для данного вида разрешено использование бизнес-календаря, и в _Справочнике сотрудников_ для исполнителя задания (или его организации/подразделения) определен бизнес-календарь, заполнение данных полей будет производиться по следующим правилам:

* При заполнении полей *Дата начала* + *Длительность* автоматически вычисляется дата завершения;
* При заполнении полей *Дата начала* + *Дата завершения* автоматически вычисляется длительность;
* При заполнении полей *Дата завершения* + *Длительность* автоматически вычисляется дата начала.

Автоматический расчет будет производиться только при одновременном задании двух параметров. Пользователь (при необходимости) может указать только один из параметров, или оставить поля пустыми.

Отображение значения поля *Длительность* может производиться либо в днях, либо часах (в зависимости от настройки элемента управления в Конструкторе разметок). Формат отображения дат начала и завершения также определяется в настройках элементов разметки. Если в задании указаны единицы измерения Длительности = часы, плановые даты вычисляются с учетом текущего времени. Если Длительность = дни, то 1 день -- это завтрашняя дата до 23:59.

В приложении имеется возможность поиска всех карточек заданий, которые были просрочены, то есть не были завершены на указанную дачу завершения. Для поиска используется поле метаданных карточки из группы Задание: *Завершено позже срока*. Данное поле по умолчанию не отображается в карточке, но может быть использовано при построении поисковых запросов. В случае, если задание будет просрочено, поле примет значение "Да".

== Настройка напоминаний о выполнении задания

При создании задания можно настроить напоминание о необходимости выполнения задания с использованием задачи Outlook. Напоминание может настроить себе любой пользователь, открывший задание.

[NOTE]
====
Администратор системы может ограничить права пользователей по созданию напоминаний в _Конструкторе ролей_.
====

[CAUTION]
====
Формирование напоминаний возможно только при запущенном приложении _Microsoft Outlook_.
====

.Для настройки напоминания:
. Создайте карточку _Задание_, затем перейдите на вкладку xref:task/card.adoc#create-tab[*Создание задания*].
+
.Настройка напоминания о выполнении задания
image::Tcard_tab_create_author_remind.png[Настройка напоминания о выполнении задания]
+
. Чтобы определить интервал времени, когда пользователь получит напоминание _MS Outlook_, установите флаг в поле *Напомнить за N часов до завершения задания*.
. В поле *Дата напоминания* укажите дату получения напоминания.
+
Выбор даты можно произвести при помощи встроенного календаря, который открывается при нажатии на стрелку в правой части поля.

== Настройка контроля исполнения задания

При создании задания можно предусмотреть контроль выполнения задания ответственным сотрудником.

.Чтобы настроить контроль исполнения заданий:
. Создайте карточку _Задание_, затем перейдите на вкладку xref:task/card.adoc#create-tab[Создание задания] и найдите область *Контроль*.
+
.Настройка контроля исполнения задания
image::Tcard_tab_create_author_controll.png[Настройка контроля исполнения задания]
. Установите флаг в поле *Поставить на контроль*.
+
Станут активными поля для назначения Контролёра и указания сроков выполнения контроля.
+
. В поле *Контролёр* укажите фамилию сотрудника, который будет контролировать качество выполнение задания.
+
Выбор производится из _Справочника сотрудников_, который открывается при нажатии на кнопку image:buttons/three-dots.png[Три точки] в правой части поля.
+
. При необходимости в поле *Дата контроля* указать дату, когда должен быть выполнен контроль выполнения задания.
+
Выбор даты можно из встроенного календаря, который открывается при нажатии на стрелку в правой части поля.
+
. Чтобы настроить приемку задания, установите флаг в поле *Требуется приемка*.
+
В жизненный цикл карточки задания будет добавлено состояние _На приемке_. После завершения задание будет переходить не в состояние _Завершено_, а в состояние _На приемке_. Если происходит возврат с делегирования, флаг не учитывается, на приемку переходит только окончательно завершаемое задание. При установке флага автоматически выставляется флаг в поле *Поставить на контроль*.
