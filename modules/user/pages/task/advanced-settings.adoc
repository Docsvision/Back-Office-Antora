= Расширенные настройки задания

.Вкладка "Расширенные настройки" для Автора задания
image::task-advanced-settings-tab.png[Вкладка "Расширенные настройки" для Автора задания]

[#comment]
== Запрос комментария при отклонении задания

.Чтобы настроить запрос комментария при отклонении задания:
. Откройте карточку _Задание_, затем перейдите на вкладку "xref:task/card.adoc#advanced-tab[Расширенные настройки]".
. Найдите область _Отклонение задания_.
. Установите флаг `*Запрашивать комментарий при отклонении задания*`.
+
При выполнении операции _Отклонить_ у исполнителя будет появляться окно для ввода текстового комментария.
+
.Окно для ввода причины отклонения задания
image::task-reject-comment.png[Окно для ввода причины отклонения задания]

[#copy-fields]
== Копирование полей в подчиненное задание

.Чтобы настроить копирование полей родительского задания в подчиненное:
. Откройте карточку _Задание_, затем перейдите на вкладку "xref:task/card.adoc#advanced-tab[Расширенные настройки]".
. Найдите область _Копировать из родительского задания_.
. Добавьте поля, которые требуется скопировать.
+
Указанные в таблице значения полей будут перенесены в дочернее задание из основного.
+
.Список полей, которые будут скопированы в дочернее задание
image::task-copy-fields-list.png[Список полей, которые будут скопированы в дочернее задание]

[#finishing-settings]
== Настройки завершения задания

Возможность автоматического завершения задания имеется только в том случае, если карточка задания находится в состоянии `В работе` (доступен переход `Прекратить исполнение`).

Настройки завершения карточек _Задание_ определяются для вида задания в _Справочнике видов карточек_. Однако, можно также индивидуально изменить данные настройки для конкретного экземпляра задания.

.Чтобы настроить параметры завершения задания:
. Откройте карточку _Задание_, затем перейдите на вкладку "xref:task/card.adoc#advanced-tab[Расширенные настройки]".
. Найдите область _Автоматическое завершение_.
. При помощи переключателя _Завершение при завершении подчиненных_ выберите предпочтительный вариант завершения родительского задания при завершении подчиненных заданий:
+
* *Не завершать* -- автоматического завершения задания не произойдет. Задание может быть завершено только вручную при помощи выполнения соответствующей операции из интерфейса карточки.
* *При завершении всех подчиненных* -- задание будет автоматически завершено, когда завершатся все его подчиненные задания.
* *При завершении любого из подчиненных* -- для завершения родительского задания достаточно завершения любого из подчиненных заданий.
+
. Чтобы при завершении родительского задания автоматически завершались все подчиненные задания, установите флаг `*При завершении задания автоматически завершать подчиненные*`.
+
По умолчанию флаг не установлен.
+
Родительское задание будет автоматически завершено, если завершение выполняется из дочерней карточки. Чтобы задание завершилось, нужно чтобы из текущего состояния можно было выполнить переход в состояние `Прекратить исполнение`.

[start=5]
.Настройте добавление отчёта при выполнении задания:
. Найдите область _Завершение задания_.
. Чтобы при завершении задания от пользователя потребовалось ввести отчёт, установите флаг `*Ввести отчёт*`.
+
Чтобы ввести отчёт в разметке карточки, настройте элемент управления `_Текст_` с привязкой к динамическим данным: секция -- `Задание`, Поле -- `Отчёт`.
+
. Чтобы при завершении задания от пользователя потребовалось приложить файл отчёта, установите флаг `*Добавить файл отчёта*`.
+
Для завершения задания в разметке карточки необходимо настроить элемент управления `_Ссылки_` с привязкой к динамическим данным: секция -- `Задание`, поле -- `Список ссылок`. Также нужно выбрать типы ссылок для отчётов в настройках пользовательского вида карточки `_Задание_`.
+
При необходимости добавленный отчёт может быть скопирован из дочернего задания в родительское. Операция может быть выполнена средствами элемента управления "xref:additional/additional-performance-tree.adoc[Дерево исполнения]".

[start=8]
.Настройте завершение, зависимое от связанных заданий:
. Найдите область _Завершение, зависимое от связанных заданий_.
. Выберите предпочтительный вариант завершения:
+
* *Не завершать* -- задание не будет завершено.
* *Завершать* -- задание будет завершено.
* *На усмотрение пользователя* -- пользователю будет выдано предупреждающее сообщение со списком заблокированных заданий, с вариантами ответа: *Продолжить* или *Прекратить* завершение задания.
