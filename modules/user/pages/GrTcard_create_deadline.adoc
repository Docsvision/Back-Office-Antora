= Указание сроков исполнения группы заданий

При создании _Группы заданий_ необходимо указать сроки её выполнения. Для настройки сроков необходимо заполнить поля:

* *Дата начала* -- предполагаемая дата начала выполнения группы заданий исполнителями. По умолчанию используется текущая дата и время;
* *Дата завершения* -- планируемая дата завершения выполнения группы заданий исполнителями;
* *Длительность (ч.)* -- в поле будет автоматически рассчитана длительность выполнения группы заданий (в часах), на основании указанных дат начала и завершения. Допускается ввод десятичных знаков (например, "3,5" часа). Отображение значения поля *Длительность* может производиться либо в днях, либо часах (в зависимости от настройки элемента управления в Конструкторе разметок). Формат отображения дат начала и завершения также определяется в настройках элементов разметки. Если в задании указаны единицы измерения Длительности = часы, плановые даты вычисляются с учетом текущего времени. Если Длительность = дни, то 1 день -- это завтрашняя дата до 23:59.
* *Трудоемкость (ч.)* -- в поле можно указать, сколько часов из отведенного периода должна занять работа над заданием.
+
.Настройка сроков исполнения группы заданий
image::GrTcard_deadlines.png[Настройка сроков исполнения группы заданий]

Сроки могут также заполняться в автоматическом режиме.

.Заполнение данных полей будет производиться по следующим правилам:
* при заполнении полей *Дата начала* *Длительность* автоматически вычисляется дата завершения;
* при заполнении полей *Дата начала* + *Дата завершения* автоматически вычисляется длительность;
* при заполнении полей *Дата завершения* + *Длительность* автоматически вычисляется дата начала.

Автоматический расчет будет производиться только при одновременном задании двух параметров. Пользователь (при необходимости) может указать только один из параметров, или оставить поля пустыми. При расчете берется календарь исполнителя.

Если исполнитель не задан, расчет будет выполнен по встроенному правилу: *рабочий день пн-пт 9-13+14-18*.

.Если в задании в качестве исполнителя указаны:
* подразделение, будет учитываться календарь подразделения (если нет, то календарь по умолчанию из настроек делопроизводства в _Справочнике сотрудников_);
* несколько исполнителей с разными календарями (то есть однозначно невозможно определить календарь исполнителя), будет учитываться календарь по умолчанию; если он не задан, дата завершения рассчитывается по встроенному правилу: *рабочий день пн-пт 9-13+14-18*;
* группа или роль, будет учитываться календарь по умолчанию или, в случае его отсутствия, дата рассчитывается по встроенному правилу.

В случае заполнения полей *Дата начала* + *Длительность* при расчете даты завершения могут учитываться настройки заданных в системе календарей следующим образом:

* будет применяться "Бизнес-календарь" сотрудника -- создателя карточки, если данный календарь задан в _Справочнике сотрудников, и в Справочнике видов карточек_ для карточки Задания установлен флаг *Использовать бизнес-календарь*;
* будет применяться "Бизнес-календарь" сотрудника -- исполнителя карточки, если данный календарь задан в _Справочнике сотрудников, в Справочнике видов карточек_ для карточки Задания установлен флаг *Использовать бизнес-календарь*, и в индивидуальных настройках исполнителя установлен соответствующий флаг. При том, если исполнителем является подразделение, будет использован календарь подразделения, а если исполнителем является группа или роль, будет использован календарь задачи;
* будет применяться "Календарь по умолчанию", если он задан в справочнике _Системные настройки_ и при этом не задан Бизнес-календарь в _Справочнике сотрудников_;
* будет применяться "Системный календарь", если в _Справочнике сотрудников_ не задан "Бизнес-календарь", и в справочнике _Системные настройки_ не задан "Календарь по умолчанию".
+
Если календарь недоступен по какой-либо причине, будет использован календарь группы заданий.
+
Сроки, указанные в карточке _Группа заданий_ по умолчанию будут отображаться в сроках индивидуальных настроек исполнителей. Если индивидуальные сроки превысят сроки, указанные в Группе заданий, при отправке группы заданий на выполнение пользователю будет выдано соответствующее сообщение.

При _последовательной_ маршрутизации в _Группе заданий_ расчет времени исполнения для исполнителей производится по следующим правилам:

* Если индивидуальные настройки не заданы, время будет распределено поровну между всеми исполнителями. Если один из исполнителей -- подразделение или группа, он будет считаться за ОДНОГО исполнителя.
* Если для одного или нескольких исполнителей заданы индивидуальные настройки, время распределяется в соответствии с данными настройками. Однако, время начала и окончания задания не должно выходить за границы общего времени _Группы заданий_, и учитывается время начала-окончания для предыдущих и последующих исполнителей.
+
При настройке времени используется механизм подсказок, с указанием рекомендуемого времени начала/завершения заданий.
