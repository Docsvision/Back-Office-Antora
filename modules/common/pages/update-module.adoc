= Особенности обновления модуля {bo}

[#conditions]
== Условия обновления

* Установка новой версии должна выполняться в нерабочее время.
* Создайте резервную копию БД {dv}.
* База данных {dv} должна быть переведена на работу с расширенными метаданными.
* При обновлении версия клиентского дистрибутива должна быть равной версии серверного дистрибутива.

[#update]
== Порядок обновления

. Остановите сервисы {dv} (в IIS и службах Windows) на серверах {dv} и СУБП.
. Установите новую версию модуля на сервере {dv} из пакета установки `{dv} 5 BackOffice server.msi`.
.. На последней странице мастера установки установите флаг *Обновить базу данных*. Запустите сервисы {dv} (в IIS и службах Windows) на серверах {dv} и СУБП, затем нажмите *Готово*.
+
.Завершение установки
image::update-db-auto-mode.png[Завершение установки]
+
.. Будет предложено выбрать обновляемые БД.
+
.Выбор обновляемых баз данных
image::update-db-list.png[Выбор обновляемых баз данных]
+
Выберите базы данных, в которых должны быть обновлены библиотеки карточек, и нажмите *OK*.
+
Дождитесь завершения процесса обновления.
. Завершите настройку {dv}.
+
Если планируется обновлять несколько модулей, следующие действия следует выполнять один раз после установки новых версий всех модулей.
+
.. Откройте {cns}. Программа будет запущена в режиме мастера настройки.
+
Пользователь, от имени которого запускается "{cns}" должен являться администратором {dv}, а также входить в группы {dv} в Справочнике сотрудников: "Администраторы УД", "Администраторы КС" и "Системная для WF".
+
.. На странице "Базы данных" выберите рабочую БД {dv}, установите переключатель в режим "Использовать выбранную в списке базу данных" и нажмите *Далее*.
+
.Обновление базы данных
image::update-db.png[Обновление базы данных]
+
.. Будет предложено обновить базу данных до новой версии. Выберите вариант "ДА".
.. На следующей странице не изменяйте выбор обновляемых библиотек карточек. Нажмите *Далее*.
+
.Обновление библиотек карточек
image::update-card-lib.png[Обновление библиотек карточек]
+
.. На странице "Параметры базы данных" нажмите *Далее*. Появится запрос на подтверждение обновления -- согласитесь. Процесс обновления займет некоторое время.
.. На странице настройки производительности и перезапуска IIS нажмите *Далее*.
.. На странице "{dm} и {ad}" нажмите *Далее*, чтобы загрузить стандартную конфигурацию приложения {dm}.
+
*Обратите внимание*: данные действия приведут к загрузке стандартных настроек приложения "{dm}" и модуля "{ad}". Если требуется сохранить собственные настройки, обратитесь за инструкцией к руководству по обновлению приложения "{wf}".
.. Подтвердите настройки Workflow и выйдите из мастера.
. Обновите версию модуля на всех узлах кластера {dv}, СУБП и {wc}а.
. Клиентские компоненты модуля на компьютерах пользователей будут обновлены автоматически при запуске {wincl}а.
+
Самостоятельно обновить клиентские компоненты можно из пакета установки `{dv} 5 BackOffice client.msi`.
