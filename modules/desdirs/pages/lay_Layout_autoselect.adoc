= Автоматический выбор разметки

Для любого вида в _Конструкторе разметок_ может быть настроено сразу несколько разметок, управление которыми происходит за счет сопоставления узлов *ролей*, *состояний* и *разметок* в области xref:lay_Interface_Design_tree.adoc[_Дерево дизайнов_]. Когда пользователь открывает или создает карточку, система автоматически выбирает для этой карточки нужную разметку.

Выбор разметки производится по следующему принципу:

. При открытии/создании карточки система проверяет роль, которую выполняет пользователь, и состояние карточки. При сопоставлении этих параметров в _Дереве дизайнов_ вида карточки ищется наиболее полное соответствие, то есть пара _Состояние – Роль_ и соответствующая этой паре разметка:
[loweralpha]
.. При наличии подобного узла, система использует назначенную узлу разметку.
.. Если такого узла нет, то ищется частичное совпадение, то есть ищется настроенная разметка для состояния карточки или роли пользователя.
.. Если же и такой разметки нет, то используется первая по списку разметка корневого узла (она имеется всегда и не может быть удалена). Хотя в корневой узел может быть добавлено любое количество разметок, обязательно должна присутствовать только одна разметка.
. В ситуации, когда в дереве дизайнов имеется несколько равноправных разметок, используется первая из них по списку. Например, если для одного состояния имеются два узла с разными ролями, а пользователь выполняет обе эти роли. В этом и других примерах будет автоматически использоваться та разметка, которая назначена первому в иерархии узлу. Если узлы поменять местами, то соответственно, поменяется и приоритет при выборе разметки.

.Чтобы для равноправных разметок определить ту из них, которая будет использоваться в запущенной карточке, выполните следующие действия:
. Найдите в _Дереве дизайнов_ узел, содержащий равноправные разметки.
. Установите курсор на разметку, которая должна автоматически выбираться в запущенной карточке.
. Нажмите на кнопку image:buttons/lay_Node_move_up.png[image]**Переместить выше**.
+
Запись о разметке будет перемешена вверх.
. Выполните предыдущую операцию столько раз, сколько потребуется, чтобы разметка оказалась первой в списке узла.
+
При необходимости аналогичным образом переместите остальные разметки для определения их приоритета, воспользовавшись кнопками image:buttons/lay_Node_move_up.png[image]**Переместить выше** и image:buttons/lay_Node_move_down.png[image]**Переместить ниже**.
