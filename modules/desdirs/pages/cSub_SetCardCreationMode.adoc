= Настройка способа создания карточки

В Windows-клиенте карточку можно создавать различными способами. Настройка способа создания выполняется отдельно для каждого вида карточки на панели *Режимы создания* вкладки *Общие*.

Чтобы настроить новый способ создания карточки определенного вида, выполните следующие действия:

. Выберите в _Дереве видов карточек_ вид, для которого требуется определить способ создания карточек.
. Откройте вкладку *Общие* и перейдите в область *Режимы создания*.
+
image::cSub_Area_CreateModes_1.png[Область для настройки режима создания карточки]
. Убедитесь, что для вида используются xref:cSub_Common_Inheritance.adoc[настройки наследования] _Все собственные_.
. Нажмите на кнопку image:buttons/cSub_Add.png[image,width=25,height=21] на ленте области *Режимы создания*.
+
Будет открыто окно *Настройка способа создания карточки*.

image::cSub_Set_CardCreateMode.png[Настройка способа создания карточки]
.  В данном окне необходимо определить следующие параметры:
* *Отображаемое название* - название команды, которая будет вызывать данный режим создания карточки. Название будет отображаться при выборе тех элементов карточки, откуда можно вызвать режим.
* *Способ создания* - определяет способ создания карточки текущего вида. Значение поля выбирается из списка, включающего следующие значения:
** _По ссылке_ - создание связанной карточки текущего вида из другой карточки с помощью кнопки *Создать карточку* или элемента управления _Ссылки_. Доступно для всех типов карточек. При выборе данного значения доступны следующие атрибуты для заполнения:
*** Отображаемое название;
*** Вид родительской карточки;
*** Тип ссылки (значение выбирается из _Справочника ссылок_);
*** Размещение по умолчанию;
*** Отображать диалог выбора папки;
*** Шаблон.
** _Создать по штрих-коду_ - создание карточки в автоматическом режиме после сканирования штрих-кода документа ручным сканером. Если карточка с таким штрих-кодом уже существует, она будет открыта. Доступно для карточек типа _Документ_. При выборе данного значения доступны следующие атрибуты для заполнения:
*** Размещение по умолчанию;
*** Отображать диалог выбора папки;
*** Шаблон.
+
Для данного способа создания карточки не предусмотрено команды в интерфейсе пользователя. Настройка применяется, когда пользователь выполняет сканирование штрих-кодов карточек ручным сканером при открытом окне Windows-клиента.
** _Задание без размещения_ - создание инициативного задания без размещения. Доступно для карточек типа _Задание_. В этом случае на ленте инструментов Windows-клиента появится кнопка _Создать задание_, включающая подменю со списком из способов настройки заданий без размещения. При отсутствии хотя бы одной настройки способа создания _Задание без размещения_ кнопка на ленте не отображается. Ярлык созданного задания в текущей папке не создается, но доступен Администратору в системной папке по пути: _Карточки - Базовые объекты – Задание_. Параметр необходим для работы приложений _Управление документами_ и _Office Toolbar_. При выборе данного значения доступен следующий атрибут для заполнения:
*** Отображаемое название;
*** Шаблон.
** _Создание документа_ - создание карточки _Документ_ с определенным способом размещения. Доступно для карточек типа _Документ_. Способ определяется в поле _Размещение по умолчанию_. Параметр необходим для работы приложения _Office Toolbar_. При выборе данного значения доступны следующие атрибуты для заполнения:
*** Размещение по умолчанию;
*** Отображать диалог выбора папки;
*** Шаблон.
** _Документ без размещения_ - создание документа без размещения. Доступно для карточек типа _Документ_. В этом случае на ленте инструментов Windows-клиента появится кнопка _Создать документ_, включающая подменю со списком из способов настройки документов без размещения. При отсутствии хотя бы одной настройки способа создания _Документ без размещения_ кнопка на ленте не отображается. Ярлык созданного документа в текущей папке не создается, но доступен Администратору в системной папке по пути: _Карточки - Базовые объекты – Документ_. Параметр необходим для работы приложений _Управление документами_ и _Office Toolbar_. Для каждого вида документов может быть создано несколько режимов создания данного типа. При выборе данного значения доступны следующие атрибуты для заполнения:
*** Отображаемое название;
*** Шаблон.
* *Вид родительской карточки* - определяет вид родительской карточки – карточки, из которой создается новая карточка текущего вида. По данной настройке также определяется доступность данной команды в Windows-клиенте. Содержит следующие значения:
** _Всё_ (при выборе данного значения операция редактирования не создается);
** _Вид карточки_ (выбранный пользователем вид).
* *Тип ссылки* - определяет тип ссылки, связывающей создаваемую карточку текущего вида с родительской. Позволяет выбрать значения из _Справочника ссылок_.
* *Размещение по умолчанию* - определяет место расположения создаваемой карточки текущего вида. Содержит следующие значения:
** _Без размещения_ - ярлык на папку не будет отображен в пользовательских папках;
** _Текущая папка_ - карточка будет создана в той папке, откуда пользователь открыл родительскую карточку, с учетом следующих особенностей:
*** если тип папки _Стандартная_, создаваемая карточка будет создана непосредственно в ней;
*** если тип папки _Делегат_, карточка будет создана в папке-источнике, а в папке-делегате будет автоматически отображен ярлык на данную карточку;
*** если тип папки _Виртуальная_, карточка будет создана без размещения (это же касается выбранных делегатов на виртуальные папки);
** _Папка родительской карточки_ - способ размещения аналогичен размещению _Текущая папка_, за исключением открытия родительской карточки из папки типа _Виртуальная_. В этом случае дочерняя карточка будет создана в той _Стандартной_ папке, где она была найдена по поисковому запросу виртуальной папки;
** _Личная папка_ - карточка будет создана в _Личной_ папке пользователя. Если _Личная_ папка не задана, карточка будет создана без размещения;
** _Произвольная папка_ - карточка будет создана в папке, выбранной пользователем, с учетом особенностей использования типов папок (аналогичных значению _Текущая папка_).
+
[NOTE]
====
Если родительская карточка была открыта из виртуальной папки, новая карточка будет создана без размещения независимо от указанного в настройках способа создания.
====
* *Отображать диалог выбора папки* - при выставленном флаге будет открываться окно для выбора папки, в которой будут создаваться карточки. Используется для варианта размещения _Произвольная папка_.
* *Шаблон* - определяет шаблон карточки для создаваемой карточки текущего вида. Выбор значений производится из шаблонов, доступных для выбора в Windows-клиенте;
* *Операция редактирования* - определяет операцию редактирования для вида, указанного в поле *Вид родительской карточки*. Поле активно только при выборе в поле *Вид родительской карточки* любого значения, кроме _Все_. Выбор значений производится из списка операций редактирования выбранного вида карточки. При необходимости может быть создана новая операция редактирования. Для создания операции необходимо нажать на кнопку image:buttons/cSub_add_into_field.png[image]. При этом будет открыто окно *Новая операция*. Описание создания операций редактирования содержится в _Справочнике состояний_.
* *Отображать команду* - при выставленном флаге на ленте карточки появится кнопка _Создание карточки._ Выпадающий список данной кнопки будет содержать команды, названия которых указаны в поле *Отображаемое название*, и для которых установлен флаг в поле *Отображать команду*. Настройка актуальна, если указан конкретный вид родительской карточки в поле *Вид родительской карточки*. При отсутствии флага способ создания будет активен, но кнопка для создания карточки создаваемого вида не будет отображаться в пользовательском интерфейсе.
. После того, как все необходимые параметры будут заданы, необходимо нажать на кнопку *ОК*.
+
При создании настройки пользователем, в _Справочнике состояний_ будет сформирована операция редактирования для соответствующего вида карточки. Название операции будет соответствовать названию в таблице настроек для карточки. По умолчанию операция доступна во всех состояниях. Настройка ограничений по доступности текущей операции в автомате состояний, ролевой модели должна производиться пользователем самостоятельно. Также в _Конструкторе разметок_ операции могут быть связаны с определенными элементами интерфейса. При выборе в поле *Вид родительской карточки* значения _Все_, операция редактирования не формируется.

image::cSub_Area_CreateModes_ex.png[Отображение нового режима создания карточки]
