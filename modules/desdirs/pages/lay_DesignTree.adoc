[[ariaid-title1]]
== Дерево дизайнов

[.dfn .term]_Дерево дизайнов_ позволяет управлять применением разметок при создании или открытии карточек текущего вида. [#concept_e4l_b5w_4m__chain .ph]#В [.dfn .term]_Дереве дизайнов_ могут быть организованы цепочки соответствий [.keyword .parmname]_Состояние-Разметка_, или [.keyword .parmname]_Состояния-Роль-Разметка_, или [.keyword .parmname]_Роль-Разметка_#. Внешне цепочки соответствий выглядят как узлы с иерархическим подчинением. Чтобы соответствие имело смысл, каждая цепочка должна оканчиваться указанием разметки. Смысл данных сопоставлений состоит в том, чтобы при создании/открытии карточки система могла выбрать нужную разметку, сопоставив состояние карточки и/или роль, которую выполняет пользователь. Если для карточки в соответствии с [.dfn .term]_Деревом дизайнов_ ее вида подходит сразу несколько разметок, то приоритет отдается той, которая стоит выше в иерархии. Для выбора других доступных пользователю разметок, на ленту карточки может быть добавлена кнопка [.keyword]*Дизайн*.

Корневым узлом дерева является активный вид карточки (то есть вид редактируемой карточки). В начале настройки в дереве отображается корневой узел с разметкой по умолчанию.

image::images/lay_Design_tree_ex.png[[.fig--title-label]##Рис. 1. ##Пример использования 'Дерева дизайнов']

На рисунке *Пример использования 'Дерева дизайнов'* показаны цепочки соответствия для карточки [.dfn .term]_Задание_ пользовательского вида [.keyword .parmname]_На исполнение_, где:

* В состоянии карточки `Делегировано` будет применяться [.keyword]*Разметка карточки делегата* (цепочка [.keyword .parmname]_Состояние-Разметка_);
* В состоянии карточки `В работе` разметки будут зависеть также от роли пользователя (цепочка [.keyword .parmname]_Состояния-Роль-Разметка_):
** для [.keyword]*Автора* будет применяться [.keyword]*Разметка карточки автора* (цепочка [.keyword .parmname]_Роль-Разметка_);
** для [.keyword]*Исполнителя* будет применяться [.keyword]*Разметка карточки исполнителя*;
* Для самой карточки будет применяться разметка [.keyword]*Базовая*.

Если в дерево добавить непосредственно разметку, без промежуточных узлов, то условием применения разметки будет соответствие ее текущему виду (т.е. это условие будет выполняться всегда, если нет других, более приоритетных разметок). Корневой вид при этом удалить нельзя, т.к. разметка в отрыве от вида не существует. Обратите внимание также на то, что для узла разметки нельзя создать какой-либо подчиненный узел. Удалить из дерева все узлы невозможно: хотя бы один узел должен присутствовать.

* *xref:../pages/lay_Node_add.adoc[Добавление узла]* +
* *xref:../pages/lay_Node_delete.adoc[Удаление узла]* +
* *xref:../pages/lay_Layout_autoselect.adoc[Автоматический выбор разметки]* +

*На уровень выше:* xref:../pages/lay_Work.adoc[Работа с конструктором]
