= Настройка проверки уникальности атрибутов документов

Для карточек базового типа _Документ_ (и дочерних видов) имеется возможность настройки проверки на наличие в карточках данного вида уникальных атрибутов. По умолчанию, настройка уникальности для полей в справочнике отсутствует.

[NOTE]
====
Использование метода настроено для карточек вида _Документ УД_.
====

Проверка уникальности выполняется специальным методом, вызываемым по событию из карточки. При обнаружении карточек с уникальными атрибутами у пользователя будет открываться окно с перечнем данных карточек.

[WARNING]
====
Проверка уникальности не работает для системных полей *Вид* и *Состояние*.
====

.Чтобы настроить проверку уникальности атрибутов карточек _Документ_:
. xref:card-kinds/select-type.adoc[Выберите] базовый тип карточки _Документ_.
. Выберите в _Дереве видов карточек_ дочерний вид.
. Перейдите на вкладку *Проверка уникальности*.
+
.Вкладка "Проверка уникальности"
image::unique-tab-doc.png[Вкладка "Проверка уникальности"]
+
. Для добавления уникального атрибута нажмите на кнопку image:buttons/plus-green.png[Зелёный плюс] в области *Атрибуты документа, проверяемые на уникальность*.
+
Будет открыто окно *Выбор поля*.
+
.Выбор поля для настройки уникальности
image::cSub_SelectField.png[Выбор поля для настройки уникальности]
+
. Выберите названия полей карточки, которые требуется проверять на уникальность.
. Нажмите на кнопку *ОК*.
. Определите способ поиска. В поле *Объединение* установите переключатель в нужное положение:
+
* _И_ -- поиск карточек, в которых все настроенные параметры уникальности (поля) совпадут с аналогичными данными в другой карточке этого же вида;
* _ИЛИ_ -- поиск карточек, в которых хоть один настроенный параметр уникальности совпадет с аналогичными данными в другой карточке этого же вида.
+
. Нажмите на кнопку *ОК*.
+
При сохранении карточки _Документ_, для которой выполнены описанные выше настройки справочника, системой будет выполнен поиск карточек с настроенными значениями атрибутов (совпадение по И/ИЛИ). В случае успешного поиска пользователю будет выдано окно со списком результатов поиска.
+
.Сообщение о нарушении уникальности атрибутов документа
image::cSub_Document_Unique_cardlist.png[Сообщение о нарушении уникальности атрибутов документа]
+
При наличии у пользователя соответствующих прав, найденная карточка может быть открыта на редактирование двойным щелчком левой клавиши мыши. Результат сохранения будет зависеть от предпочтений пользователя:
+
* при нажатии на кнопку *ОК* карточка будет сохранена, что фактически приведет к появлению карточки с совпадающими атрибутами (например, второй карточки с тем же названием и автором);
* при нажатии на кнопку *Отмена* сохранения не произойдет, вместо этого будет выполнен возврат в режим редактирования текущей карточки.
