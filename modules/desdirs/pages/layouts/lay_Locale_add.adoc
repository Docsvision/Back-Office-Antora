= Добавление локализации разметки

Добавление локализации не является необходимой операцией при работе с системой {dv}. Создание новых локализаций необходимо выполнять в случае, когда при работе с _{dv}_ предполагается использовать несколько иностранных языков и может потребоваться добавить несколько вариантов перевода для новых "пользовательских" полей, добавляемых в карточки при внедрении системы.

Язык интерфейса напрямую зависит от зависит от того языка, который настроен для клиентского приложения (задан в параметрах {wincl} или был указан при старте _РМА {dv}_). При открытии клиентского приложения, язык интерфейса (главного окна приложений) будет определяться данными настройками, а язык разметки карточек будет определяться по следующим правилам:

* если для выбранного языка клиентского приложения не будет найдено соответствующей локализованной разметки, в карточках будет показана разметка, заданная по умолчанию;
* если для выбранного языка клиентского приложения будет найдена соответствующая локализация, в карточках будет показана разметка найденной локализации.

Так, если при работе с системой _{dv}_ предполагается использование только русского языка, добавление локализации RU не требуется. Если же предполагается использовать в работе, помимо русского, например, еще и английский язык, то рекомендуется в настройках клиентского приложения {wincl} добавить две локализации -- RU и EN.

Локализация добавляется для вида карточки. Для всех разметок вида будет доступен одинаковый набор доступных локализаций.

Список локализаций, настроенный для вида, автоматически распространяется только на элементы управления. Описание настройки локализации для ленты карточек содержится в разделе xref:layouts/lay_Set_ribbon_rename.adoc[Переименование и локализация названий элементов ленты].

.Чтобы добавить новую локализацию для разметки:
. В главном окне _Конструктора разметок_ выберите значения полей *Библиотека карточек* и *Вид карточки*.
+
На ленте конструктора появятся элементы для настройки локализации: кнопка image:buttons/globe.png[Земной шар] и поле *Локализация*, содержащее список доступных для переключения языков. В поле будет отображена локализация, используемая по умолчанию.
+
.лементы ленты для настройки локализации разметки карточки
image::lay_Locale_main_window_fields.png[Элементы ленты для настройки локализации разметки карточки]
+
. Нажмите кнопку image:buttons/globe.png[Земной шар].
+
Будет открыто окно *Локализация разметок вида*, в котором можно добавить или удалить существующие локализации.
+
.Окно редактирования локализаций
image::lay_Locale_empty.png[Окно редактирования локализаций]
+
. Чтобы добавить локализацию, нажмите image:buttons/lay_add_green_plus.png[image].
+
По умолчанию будет добавлена локализация _en_.
+
.Первичное добавление локализации
image::lay_Locale_en.png[Первичное добавление локализации]
+
. Чтобы изменить вариант локализации, щелкните левой клавишей по записи, которую требуется изменить. Затем выберите требуемую локализацию из выпадающего списка доступных локалей и нажмите *ОК*.
+
Каждый язык может быть добавлен только один раз. При повторном выборе уже добавленного языка появится сообщение: `Выбранная локаль уже добавлена`.
+
.Выбор языка локализации
image::lay_Locale_list.png[Выбор языка локализации]
+
При сохранении изменений для разметки будет сгенерирован `*.xml` файл, в котором в дальнейшем будут сохранены параметры локализуемых свойств _дополнительных_ элементов управления.
. Выполните настройку локализации _дополнительных_ элементов управления.
