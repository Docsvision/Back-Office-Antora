= Ссылки

== Назначение

Элемент предназначен для создания таблицы ссылок на другие элементы (карточки, файлы и т.д.). Работает со _Справочником ссылок_.

Создание ссылок производится в _Справочнике ссылок_. Имена ссылок могут быть произвольными.

== Отображение в области "Панель инструментов"

 +
image:img/lay_Element_References.png[image] +

== Отображение в запущенной карточке

Возможно использование двух режимов отображения: *Карточки* и *Файлы*.

_Режим "Файлы"_

 +
image:img/lay_References_icons.png[image] +

В режиме *Файлы* заблокированные и разблокированные файлы различаются иконками. Пользователям доступны операции:

* _Добавить файл_ - открытие окна для добавления файла, с выбором вида создаваемой карточки _Документ_.
* _Отсканировать и добавить_ - после выбора вида будущей карточки будет показан диалог сканирования. Отсканированный файл будет приложен к созданной карточке документа выбранного ранее вида как _основной_, и в описываемом элементе *Ссылки* будет отражена связь между карточками. Чтобы команда отобразилась в меню, в свойстве xref:reference_ivv_1fz_fm__operations[Операции] следует установить флаг *Сканирование файла*. Для разграничения доступа к операции с использованием _ролевой модели_, в свойстве xref:reference_ivv_1fz_fm__state_operations[Операции состояния] в поле *Добавить дополнение* следует указать доступные операции редактирования.
* _Редактировать_ - открытие файла на редактирование.
* _Открыть_ - открытие файла на чтение.
* _Открыть карточку_ - открытие карточки выбранного файла.
* _Удалить_ - удаление выбранного файла.
* _Копировать_ - копирование выбранного файла.
* _Заблокировать для работы_ - блокировка выбранного файла.
* _Вернуть с блокировки_ - возврат с блокировки открытого файла.
* _Отменить блокировку_ - отмена блокировки файла.
* _Показать область группировки_ - в верхней части таблицы будет отображена область для группировки по столбцу.
* _Обновить_ - обновление записей в таблице.

_Режим "Карточки"_

 +
image:img/lay_Card_References_cards.png[image] +

Пользователям доступны операции:

* _Добавить файл_ - открытие подменю со списком доступных видов. После выбора вида будет показан диалог выбора файла из файловой системы. Для выбранного файла будет автоматически создана карточка документа (выбранного ранее вида), и эта карточка будет приложена в виде ссылки в описываемый элемент *Ссылки*.
* _Отсканировать и добавить_ - после выбора вида будущей карточки будет показан диалог сканирования. Отсканированный файл будет приложен к созданной карточке документа выбранного ранее вида как _основной_, и в описываемом элементе *Ссылки* будет отражена связь между карточками. Чтобы команда отобразилась в меню, в свойстве xref:reference_ivv_1fz_fm__operations[Операции] следует установить флаг *Сканирование файла*. Для разграничения доступа к операции с использованием _ролевой модели_, в свойстве xref:reference_ivv_1fz_fm__state_operations[Операции состояния] в поле *Добавить дополнение* следует указать доступные операции редактирования.
* _Создать карточку_ - создание новой карточки выбранного вида, после чего она появится в виде ссылки в описываемом элементе.
* _Добавить карточку_ - выбор существующей карточки в системе Docsvision и создание связи между открытой и добавляемой карточкой. Диалог добавления позволяет выбрать сразу несколько карточек. На выбранные карточки будут созданы ссылки одного типа.
* _Добавить карточку по шаблону_ - открытие окна навигации по папкам Docsvision, в котором будут отображены только шаблоны. После выбора шаблона, на его основе будет создана карточка, которая и будет приложена в виде ссылки.
* _Добавить папку Docsvision_ - добавление ссылки на выбранную папку Docsvision.
* _Добавить URL_ - добавление ссылки на веб-страницу, добавленную в текстовом поле: +
image:/lay_References_url.png[image] +
* _Удалить_ - удаление выбранной ссылки.
* _Описание_ - открытие окна для ввода описания ссылки. +
image:/lay_References_ref_description.png[image] +
* _Открыть_ - открытие выбранной карточки, к которой прикреплен файл. Для открытой карточки включается режим блокировки.
* _Копировать_ - копирование выбранной карточки, добавление ссылки на копию;
* _Показать область группировки_ - в верхней части таблицы будет отображена область для группировки по столбцу. +
image:/lay_References_group_area.png[image] +
* _Показать область описания_ - включение режима отображения описаний, добавленных командой _Описание_. +
image:/lay_References_description_area.png[image] +
Если в настройках элемента управления активирован параметр `Показывать описания`, режим отображения описаний будет включен по умолчанию.
* _Обновить_ -  обновление записей в таблице.

В контекстном меню элемента реализован механизм, позволяющий вычислять и исключать из меню элементы, которые настройками *Типы карточек* и *Типы ссылок* определены как единственно возможные для выбора. Например, для создания карточки вида _Внутренний_ вместо переходов: [.ph .menucascade]#*Создать карточку* > *Тип ссылки* > *Документ* > *Документ УД* > *Внутренний*# пользователю будут доступны переходы меню: [.ph .menucascade]#*Создать карточку* > *Тип ссылки* > *Внутренний*#, так как тип _Документ_ и вид _Документ УД_ являются единственными на своем уровне в дереве видов карточек. Вычисление исключаемых элементов выполняется по следующим правилам:

* если для элемента задан единственный тип карточки и несколько типов ссылок, в меню будет отображено: [.ph .menucascade]#*Создать карточку* > *Тип ссылки*#, а выбор вида будет пропущен;
* если для элемента задан единственный тип ссылки и один или несколько видов карточек, в меню будет отображено: [.ph .menucascade]#*Создать карточку* > *Вид карточки*#, а выбор типа ссылки будет пропущен.

== Общие

xref:lay_Elements_general.adoc[Общие свойства элементов управления]

== Поведение

Режим отображения::
  В поле можно выбрать режим отображения содержимого:
  +
  * _Файлы_ -  режим предназначен для работы со ссылками на карточки _Документ_. В данном режиме вложения отображаются в виде списка файлов.
  * _Карточки_ - режим предназначен для работы со ссылками любых типов. В данном режиме вложения отображаются в виде таблицы карточек.

== Данные

Источник данных::
  Тип поля данных - _RefcardID_ (поле - ссылка на системную карточку списка ссылок).
  +
  В поле необходимо выбрать источник данных для элемента. Например:
  +
  * Для создания карточек заданий из карточки документа указать: Источник данных – "Основная информация", Поле данных– "Ссылки".
  * Для создания карточки документа из карточки задания указать: Источник данных – "Задание", Поле данных– "Список ссылок".
  * Для отображения в области вложений карточки Задания ссылок на файлы указать: Источник данных – "Задание", Поле данных– "Список ссылок", Типы ссылок - указать типы ссылок, настроенные в _Справочнике видов карточек_ для вида задания на вкладке *Задание*.
  +
  [NOTE]
  ====
  [.note__title]#Важное замечание: Для корректной работы элемента управления, тип ссылки поля, являющегося источником данных, должен быть *Сильная ссылка*.
  ====
Операции::
  В поле необходимо выбрать операции, для которых будет доступен выбор ссылки. При этом в контекстном меню элемента появится пункт, соответствующий операции.
  +
  image::lay_References_operations.png[image]
Операции состояния::
  В поле для операций, выбранных в поле *Операции*, можно указать операцию из _Конструктора состояний_.
  +
  image::lay_References_state_operations.png[image]
Операция редактирования::
  В поле можно выбрать операцию из _Конструктора состояний_ для редактирования элемента управления. При запрете операции в конструкторе редактирование элемента *Ссылки* также будет запрещено;
Папка по умолчанию::
  В поле можно указать папку, которая будет открываться по умолчанию при выборе карточки. Допускается выбор папки любого вида (как обычной, так и виртуальной, в том числе - с параметрическим поиском). В зависимости от настроек элемента, в карточке будет выполняться следующий сценарий:
  +
  * если папка указана, при выборе карточки будет открываться данная папка;
  * если папка не указана, будет открываться _Личная_ папка, а при ее отсутствии - дерево папок.
Предпросмотр::
  В поле необходимо выбрать элемент типа xref:lay_Elements_FilePreview.adoc[Предпросмотр файла] из элементов, существующих в текущей разметке. При этом в работающем приложении при выделении файла в элементе управления _Ссылки_ файл будет открыт в режиме предварительного просмотра в связанном элементе _Предпросмотр файлов_. Файл отображается, когда значение свойства *Режим отображения* = _Файлы_.
Создание без типа ссылки::
  В поле определяется возможность добавления файлов и создания карточек без указания типа ссылок:
  +
  * _Да_ - при создании карточки в контекстном меню элемента управления _Ссылки_ будет доступна опция _Ссылка не задана_. Создавать карточки при помощи данного элемента управления можно без указания типа ссылки.
  * _Нет_ - добавление карточки и создание карточки возможно только с указанием типа ссылки.
Типы карточек::
  В поле определяется возможность добавления файлов и создания определенных типов и видов карточек. Для выбранного вида имеется возможность автоматического добавления дочерних видов. Для настройки данной возможности следует выбрать вид в окне *Разрешенные типы и виды*, затем вызвать контекстное меню для этого вида и включить опцию _Со всеми дочерними_.  Контекстное меню появится, когда значение свойства *Режим отображения* = _Файлы_ и только при наличии флага, установленного напротив требуемого вида. При включении опции _Включая дочерние_, новые создаваемые подчиненные виды автоматически добавляются в элемент управления и становятся доступными для выбора.
Типы ссылок::
  В поле определяется допустимые типы ссылок, которые могут использоваться при добавления файлов.
Хранить сильную ссылку::
  В поле можно указать необходимость использования сильных (значение *Да*) или слабых ссылок (значение *Нет*).

== Внешний вид

Показывать описания::
  Определяет видимость описаний к ссылкам:
  +
  * _Да_ - описания по умолчанию отображаются.
  * _Нет_ - описания по умолчанию скрыты.

== Настройка локализации

Допускается xref:lay_Locale_common_element_properties.adoc[локализация _общих_ свойств] элемента. Описание настройки локализации содержится в разделе xref:lay_Elements_general.adoc[Общие свойства элементов управления].
