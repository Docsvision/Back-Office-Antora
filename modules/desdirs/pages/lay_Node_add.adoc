[[ariaid-title1]]
== Добавление узла

Узлы [.dfn .term]_Дерева дизайнов_ предназначены для определения тех сущностей, для которых предназначена та или иная разметка. Например, если разметка должна соответствовать определенной пользовательской роли, то в качестве узла следует выбрать роль. [.ph]#В [.dfn .term]_Дереве дизайнов_ могут быть организованы цепочки соответствий [.keyword .parmname]_Состояние-Разметка_, или [.keyword .parmname]_Состояния-Роль-Разметка_, или [.keyword .parmname]_Роль-Разметка_#. Состояния и роли должны быть настроены заранее в соответствующих конструкторах [.dfn .term]_Docsvision_.

Настройка разметок для сущностей производится в несколько этапов. На начальном этапе определяется та сущность, для которой будет использоваться разметка (состояние или роль), а на следующем - в уже созданный узел добавляется сама разметка из [.dfn .term]_Списка разметок_ или новая сущность (например, в узел состояния добавляется узел роли). При формировании дерева, разметки должны быть уже созданы и настроены.

Помимо состояний или ролей, разметка может соответствовать самой карточке. В частности, при отсутствии узлов в [.dfn .term]_Дереве дизайнов_ обязательно будет присутствовать одна разметка, относящаяся к карточке. При необходимости, карточке можно поставить в соответствие и другие разметки.

Описание принципа выбора разметки для запущенной карточки содержится в разделе xref:lay_Layout_autoselect.adoc[Автоматический выбор разметки].

Чтобы добавить в дерево новый дочерний узел, выполните следующие действия:

. [.ph .cmd]#Выделите в [.dfn .term]_Дереве дизайнов_ узел, в котором нужно создать подчиненный узел.#
. [.ph .cmd]#Нажмите на кнопку image:images/Buttons/lay_Node_new.png[image]**Новый узел**. #
+
Будет открыто окно [.keyword .wintitle]*Добавление узла дерева дизайна*.

image::images/lay_DesignTree_Node_add.png[[.fig--title-label]##Рис. 1. ##Добавление узла дерева дизайна]
. [.ph .cmd]#Установите переключатель на значение, соответствующее типу создаваемого узла:#
* [.keyword .parmname]_Роль_ - если требуется создать соответствие [.keyword .parmname]_Роль-Разметка_;
* [.keyword .parmname]_Состояние_ - если требуется создать соответствие [.keyword .parmname]_Состояние-Разметка_ или [.keyword .parmname]_Состояния-Роль-Разметка_;
* [.keyword .parmname]_Разметка_ - если требуется создать соответствие [.keyword .parmname]_Карточка-Разметка_.
+
Следует учитывать, что за одну операцию нельзя создать узел роли или состояния и добавить разметку. Такое действие допускается только для соответствий [.keyword .parmname]_Карточка-Разметка_.
. [.ph .cmd]#Задайте значение узла любым из следующих способов:#
* введите название узла вручную;
* из раскрывающегося списка выберите нужное значение.
+
В списке будут присутствовать все роли, состояния и разметки, настроенные для данного вида.
+
image::images/lay_DesignTree_Node_add_role.png[[.fig--title-label]##Рис. 2. ##Пример первого этапа задания соответствия 'Роль-Разметка']
. [.ph .cmd]#Нажмите на кнопку [.ph .uicontrol]*ОК*.#
+
Созданный узел будет добавлен в дерево.

image::images/lay_DesignTree_Node_add_role_ex.png[[.fig--title-label]##Рис. 3. ##Пример добавления узла для роли]
. [.ph .cmd]#Установите курсор на созданный узел.#
. [.ph .cmd]#Нажмите на кнопку image:images/Buttons/lay_Node_new.png[image]**Новый узел**. #
. [.ph .cmd]#Выберите для созданного ранее узла (в данном примере - узла роли) нужную разметку.#
+
image::images/lay_DesignTree_Node_add_value.png[[.fig--title-label]##Рис. 4. ##Добавление узла дерева дизайна]
+
В дереве для роли будет определена соответствующая разметка.

image::images/lay_DesignTree_Node_add_value_ex.png[[.fig--title-label]##Рис. 5. ##Результат настройки соответствия 'Роль-Разметка']
. [.ph .cmd]#Аналогичным образом выполните настройку других узлов.#

Если в [.dfn .term]_Дереве дизайнов_ на одном уровне в дереве создано несколько разметок, в карточке на ленте будет отображаться кнопка [.ph .uicontrol]*Дизайн* (если кнопка отмечена в настройках ленты разметки). С помощью данной кнопки можно переключать разметки, выбирая их из выпадающего меню. Если пользователь может выполнять в карточке несколько ролей, и если для этих ролей заданы в дереве разные разметки, то тоже их можно выбирать кнопкой [.ph .uicontrol]*Дизайн*.

image::images/lay_Card_design_button.png[[.fig--title-label]##Рис. 6. ##Кнопка и выпадающее меню для переключения разметок в открытой карточке]

При первоначальном открытии карточки, по умолчанию к ней применяется разметка, которая находится в дереве дизайнов первой в списке (из числа удовлетворяющих условию разметок).

*На уровень выше:* xref:../pages/lay_DesignTree.adoc[Дерево дизайнов]
