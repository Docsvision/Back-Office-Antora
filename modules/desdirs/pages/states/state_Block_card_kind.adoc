= Блокировка вида карточек для редактирования

_Конструктор состояний_ является многопользовательским справочником -- состояния могут параллельно настраивать несколько пользователей, со следующими условиями:

. Пользователи должны настраивать состояния разных видов карточек: состояния одного вида может одновременно настраивать только один пользователь.
. Пользователь должен заблокировать для редактирования вид карточек, состояния которого настраивает.

Возможность настройки состояний есть только у пользователя, заблокировавшего вид для редактирования. Пользователь может заблокировать для редактирования любое количество видов. Если вид не заблокирован или заблокирован другим пользователем, настройки состояний будут доступны только на чтение.

Вид остается заблокированным до разблокировки, которую может выполнить любой пользователь с правами администратора {dv}. Снятие "чужой" блокировки сопровождается дополнительным предупреждением.

Кроме _Конструктора состояний_ есть еще несколько конструкторов, поддерживающих возможность параллельной работы пользователей. Вид карточек, заблокированный в одном из них, будет заблокирован для редактирования и в остальных многопользовательских конструкторах. Аналогичный принцип действует и при разблокировке вида карточек.

[NOTE]
====
Возможность параллельной работы поддерживают _Конструктор разметок_, _Конструктор состояний_, _Конструктор ролей_ и _Конструктор скриптов_.
====

.Текущее состояние блокировки вида карточек отображается:
* в дереве видов карточек (при xref:states/state_SelectCardType.adoc[выборе вида]) в форме значка "Замок" слева от названия вида:
** image:buttons/state_ico_mylock.png[image] (зеленый) -- блокировка установлена текущим пользователем;
** image:buttons/state_ico_someonelock.png[image] (красный) -- блокировка установлена другим пользователем;
** значок отсутствует -- вид карточек не заблокирован;
+
.Дерево видов карточек с "чужой" блокировкой вида "На исполнение"
image::state_KindTreeWithLock.png[Дерево видов карточек с "чужой" блокировкой вида "На исполнение"]
+
* на ленте _Конструктора состояний_ в виде значка "Замок" на кнопке блокировки/разблокировки вида карточек:
** image:buttons/state_KindLocked.png[image] (зеленый) -- блокировка установлена текущим пользователем;
** image:buttons/state_SomeoneKindLocked.png[image] (красный) -- блокировка установлена другим пользователем;
+
[NOTE]
====
Наведите курсор мыши на кнопку блокировки/разблокировки вида, чтобы узнать ФИО сотрудника, установившего блокировку.
====
** image:buttons/state_KindUnlocked.png[Замок закрыт] (синий) -- вид карточек не заблокирован.

.Чтобы заблокировать для редактирования xref:states/state_SelectCardType.adoc[выбранный] вид карточек:
. Нажмите на ленте на кнопку image:buttons/state_LockKind.png[image].
. Подтвердите установку блокировки для редактирования. Значок на кнопке блокировки изменится на image:buttons/state_KindLocked.png[image]; автомат состояний вида карточек станет доступен для изменения; вид будет заблокирован для редактирования во всех конструкторах, поддерживающих параллельную работу.

.Чтобы снять *свою* блокировку с выбранного вида карточек:
. Закончите изменение настроек данного вида карточек *во всех конструкторах*, поддерживающих параллельную работу, т.к. при снятии блокировки данный вид станет доступен для изменения другим пользователям.
. Нажмите на ленте на кнопку image:buttons/state_UnlockKind.png[image].
. Подтвердите снятие блокировки. Изменения, сделанные в _Конструкторе состояний_, будут сохранены; значок на кнопке блокировки изменится на image:buttons/state_KindUnlocked.png[Замок закрыт]; вид будет разблокирован во всех конструкторах, поддерживающих параллельную работу.

.Чтобы снять *чужую* блокировку с выбранного вида карточек:
. Убедитесь, что настройки, сделанные другим пользователем, сохранены или сохранение не требуется.
. Нажмите на ленте на кнопку image:buttons/state_SomeoneUnlockKind.png[image].
. Подтвердите снятие блокировки. Значок на кнопке блокировки изменится (на image:buttons/state_KindUnlocked.png[Замок закрыт]); вид будет разблокирован во всех конструкторах, поддерживающих параллельную работу.
