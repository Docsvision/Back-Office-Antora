[[ariaid-title1]]
== Настройка проверки уникальности атрибутов документов

Для карточек базового типа [.dfn .term]_Документ_ (и дочерних видов) имеется возможность настройки проверки на наличие в карточках данного вида уникальных атрибутов. По умолчанию, настройка уникальности для полей в справочнике отсутствует.

[NOTE]
====
[.note__title]#Прим.:# Использование метода настроено для карточек вида [.dfn .term]_Документ УД_.
====

Проверка уникальности выполняется специальным методом, вызываемым по событию из карточки. При обнаружении карточек с уникальными атрибутами у пользователя будет открываться окно с перечнем данных карточек.

[NOTE]
====
[.note__title]#ОСТОРОЖНО:# Проверка уникальности не работает для системных полей [.keyword]*Вид* и [.keyword]*Состояние*.
====

Чтобы настроить проверку уникальности атрибутов карточек [.dfn .term]_Документ_, выполните следующие действия:

. [.ph .cmd]#xref:cSub_Work_SelectCardType.adoc[Выберите] базовый тип карточки [.dfn .term]_Документ_.#
. [.ph .cmd]#Выберите в [.dfn .term]_Дереве видов карточек_ дочерний вид.#
. [.ph .cmd]#Перейдите на вкладку [.keyword]*Проверка уникальности*.#
+
image::images/cSub_Document_Unique.png[[.fig--title-label]##Рис. 1. ##Вкладка 'Проверка уникальности']
. [.ph .cmd]#Для добавления уникального атрибута нажмите на кнопку image:images/Buttons/cSub_Add.png[image] в области [.ph .uicontrol]*Атрибуты документа, проверяемые на уникальность*.#
+
Будет открыто окно [.keyword .wintitle]*Выбор поля*.

image::images/cSub_SelectField.png[[.fig--title-label]##Рис. 2. ##Выбор поля для настройки уникальности]
. [.ph .cmd]#Выберите названия полей карточки, которые требуется проверять на уникальность.#
. [.ph .cmd]#Нажмите на кнопку [.ph .uicontrol]*ОК*.#
. [.ph .cmd]#Определите способ поиска. В поле [.keyword]*Объединение* установите переключатель в нужное положение: #
* [.keyword .parmname]_И_ - поиск карточек, в которых все настроенные параметры уникальности (поля) совпадут с аналогичными данными в другой карточке этого же вида;
* [.keyword .parmname]_ИЛИ_ - поиск карточек, в которых хоть один настроенный параметр уникальности совпадет с аналогичными данными в другой карточке этого же вида.
. [.ph .cmd]#Нажмите на кнопку [.ph .uicontrol]*ОК*.#
+
При сохранении карточки [.dfn .term]_Документ_, для которой выполнены описанные выше настройки справочника, системой будет выполнен поиск карточек с настроенными значениями атрибутов (совпадение по И/ИЛИ). В случае успешного поиска пользователю будет выдано окно со списком результатов поиска.

image::images/cSub_Document_Unique_cardlist.png[[.fig--title-label]##Рис. 3. ##Сообщение о нарушении уникальности атрибутов документа]

При наличии у пользователя соответствующих прав, найденная карточка может быть открыта на редактирование двойным щелчком левой клавиши мыши. Результат сохранения будет зависеть от предпочтений пользователя:

* при нажатии на кнопку [.keyword]*ОК* карточка будет сохранена, что фактически приведет к появлению карточки с совпадающими атрибутами (например, второй карточки с тем же названием и автором);
* при нажатии на кнопку [.keyword]*Отмена* сохранения не произойдет, вместо этого будет выполнен возврат в режим редактирования текущей карточки.

*На уровень выше:* xref:../pages/cSub_Type_document.adoc[Настройки типа 'Документ']
