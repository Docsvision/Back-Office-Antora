[[ariaid-title1]]
== Сертификат

Сертификат, указанный в карточке сотрудника, используется при подписании документов и заданий с использованием усиленной электронно-цифровой подписи, а также для выполнения операции шифрования/расшифровки файлов в карточках.

Выбор сертификата сотрудника возможен только после его получения на специальном сервере сертификатов в соответствии с системой поддержки электронной цифровой подписи внутри организации. Описание настройки подписания содержится в документе [.dfn .term]_Руководство по настройке_ в разделе [.keyword]*Типовые сценарии настройки системы\Настройка электронных подписей и шифрования*.

На компьютере пользователя может быть установлено сразу несколько служебных сертификатов. Как правило, управление сертификатами в операционной системе [.dfn .term]_Windows_ выполняется в [.dfn .term]_Диспетчере сертификатов_, который открывается при выполнении команды [.keyword .parmname]_certmgr.msc_ из командной строки. Также список доступных сертификатов доступен в браузере [.dfn .term]_Internet Explorer_ (раздел [.keyword]*Internet options*, вкладка [.keyword]*Content*, кнопка [.keyword]*Certificates*).

В карточке сотрудника указать можно только один сертификат, выбрав его из числа доступных. Указанный сертификат будет загружаться при xref:staff_ActiveDirectory.adoc[синхронизации] с [.dfn .term]_Active Directory_.

. [.ph .cmd]#Чтобы указать сертификат в карточке сотрудника, нажмите кнопку [.keyword]*Выбрать* image:images/Buttons/staff_treedots.png[image,width=17,height=20] поля [.keyword]*Сертификат*. Для просмотра сертификата нажмите кнопку [.keyword]*Показать сертификат* image:images/Buttons/staff_lupa.png[image,width=27,height=24].#
+
image::images/staff_Employee_main_common_sertificate.png[[.fig--title-label]##Рис. 1. ##Выбор сертификата в карточке сотрудника]
. [.ph .cmd]#Если у пользователя имеется несколько доступных сертификатов, при выполнении операции подписания по умолчанию будет открываться окно, в котором требуется выбрать нужный сертификат. #
+
image::images/staff_Sertificate_sign_select.png[[.fig--title-label]##Рис. 2. ##Выбор сертификата при подписании]

Чтобы отключить появление этого окна, установите флаг [.ph .uicontrol]*Не показывать окно выбора сертификата*.
+
В этом случае при выполнении подписания в карточках (командой [.keyword]*Подписать* из карточек документа и задания, подписи по операции, а также при выполнении согласования на этапе с режимом [.dfn .term]_Подписание_) вместо окна выбора сертификата пользователю будет выдано сообщение: `Будет выполнено подписание с помощью                         сертификата`, содержащее ссылку на сертификат, который указан в карточке сотрудника. После подтверждения операции подписания будет наложена усиленная электронная подпись с использованием указанного сертификата.

image::images/staff_Sertificate_sign_one.png[[.fig--title-label]##Рис. 3. ##Сообщение об используемом для подписания сертификате]

Если сертификат, указанный в [.dfn .term]_Справочнике сотрудников_, просрочен, или не удалось проверить его состояние, пользователю будет выдано сообщение: `Не удалось выполнить подписание с использованием                             сертификата. Сертификат недействителен или же его состояние не может                             быть проверено. Обратитесь к администратору системы` и подпись наложена не будет.
. [.ph .cmd]#Если подписание документов выполняется с помощью криптопровайдера КриптоПро, то при подписании документов с несколькими файлами потребуется вводить пароль при наложении подписи на каждый отдельный файл. Чтобы запрос на ввод пароля выводился единожды (при подписании одного документа) установите флаг [.ph .uicontrol]*Всегда запрашивать пароль для контейнера ключа*.#
+
image::images/staff_Employee_main_common_sertificate_requestpassword.png[[.fig--title-label]##Рис. 4. ##Флаг запроса пароля для контейнера ключа на вкладке Основная карточки сотрудника]
+
[NOTE]
====
[.note__title]#Важное замечание:# Если используется криптопровайдер, отличный от КриптоПро, данный флаг должен быть [.keyword]*снят*, иначе при подписании документов будет возвращена ошибка.
====
+
Данная функциональность работает только при подписании документов сертификатом, выбранным в карточке сотрудника, в противном случае запрос пароля при подписании будет осуществляться согласно правилам криптопровайдера КриптоПро. После ввода некорректного пароля пользователю будет предоставлен стандартный диалог КриптоПро для ввода пароля.

*На уровень выше:* xref:../pages/staff_Employee_main_common.adoc[Общие данные сотрудника]
